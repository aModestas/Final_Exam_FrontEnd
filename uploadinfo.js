document.getElementById("detailsForm").addEventListener("submit", (e) => {
  e.preventDefault();
  const name = document.getElementById("name").value;
  const lastName = document.getElementById("lastName").value;
  const personCode = document.getElementById("personCode").value;
  const telNumber = document.getElementById("telNumber").value;
  const email = document.getElementById("email").value;
  const city = document.getElementById("city").value;
  const street = document.getElementById("street").value;
  const houseNumber = document.getElementById("houseNumber").value;
  const flatNumber = document.getElementById("flatNumber").value;
  //const picture = document.getElementById("img").value;

  let base64String = "";
  function imageUploaded() {
    var file = document.getElementById("img")["files"][0];
    var reader = new FileReader();
    reader.onload = function () {
      base64String = reader.result.replace("data:", "").replace(/^.+,/, "");
      imageBase64Stringsep = base64String;
      console.log(base64String);
    };
    reader.readAsDataURL(file);
    return base64String;
  }
  var pic = imageUploaded();
  console.log(pic[0]);
  const user = {
    name: name,
    lastName: lastName,
    personCode: personCode,
    telNumber: telNumber,
    email: email,
    picture:
      "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",
    city: city,
    street: street,
    houseNumber: houseNumber,
    flatNumber: flatNumber,
    userId: sessionStorage.getItem("userId"),
  };
  fetch("https://localhost:7068/Person", {
    method: "POST",
    body: JSON.stringify(user),
    headers: {
      Accept: "text/plain",
      "Content-Type": "application/json",
    },
  }).then((res) => {
    if (res.ok) {
      alert("Užklausa sėkminga");
      window.location.replace("index.html");
    } else {
      alert("Užklausa nesėkminga");
    }
  });
});
